<!DOCTYPE html>
<html>
<head>
    <title>Evasi Tabs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="tabs.css">
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="register-sw.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet">
    <script src="search.js" defer></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,500,1,0" />
    <script src="tabs.js" defer></script>
    <link rel="stylesheet" href="nav.css" />
    <script>
      let toggleState = false;
    function devtooltoggle() {
      if (toggleState) {
        eruda.hide();
        eruda.destroy();
      } else {
        var script = document.createElement('script');
        script.src = "//cdn.jsdelivr.net/npm/eruda";
        document.body.appendChild(script);
        script.onload = function () {
          eruda.init();
          eruda.show();
      }}
      toggleState = !toggleState;
    };

function Fullscreen() {
  const canvas = document.getElementById('body');
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen();
  } else if (canvas.mozRequestFullScreen) {
    canvas.mozRequestFullScreen();
  } else if (canvas.webkitRequestFullscreen) {
    canvas.webkitRequestFullscreen();
  } else if (canvas.msRequestFullscreen) {
    canvas.msRequestFullscreen();
  }
}


function navigateForward() {
  window.history.forward();
}


function navigateBackward() {
  window.history.back();
}


function reloadIframe() {
  location.reload();
}

function openDiscord() {
 location.href = '/uv/service/hvtrs8%2F-dksaopd%2Ccmm-ilvktg%2Fr9j3fTJAOA';
}

function openIframeInNewTab() {
    const iframeSrc = location.href;
    window.open(iframeSrc, '_blank');
  }


function openSettings() {
  window.location.href="/settings/"
}

function openNewTab() {
    const currentURL = window.location.href;
    const newTab = window.open('about:blank', '_blank');
    newTab.document.write('<html><body style="margin: 0; padding: 0;"><embed src="https://phantomcloud.strangled.net/'&#32;+&#32;currentURL&#32;+&#32;'" style="width: 100%; height: 100%;"></embed></body></html>');
    newTab.document.close();
  }
  
  function openNewWindow() {
    const currentURL = window.location.href;
    const newWindow = window.open('about:blank', '_blank', 'width=800,height=600');
    newWindow.document.write('<html><body style="margin: 0; padding: 0;"><embed src="https://phantomcloud.strangled.net/'&#32;+&#32;currentURL&#32;+&#32;'" style="width: 100%; height: 100%;"></embed></body></html>');
    newWindow.document.close();
  }
  
</script>
    
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NCTSG4T1B6"></script>
<script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());  gtag('config', 'G-NCTSG4T1B6');</script>
</head>
<body>
    <div class="sidenav" id="sidenav">
            <a href="index.html">Home</a>
            <a href="apps.html">Apps</a>
            <a href="games.html">Games</a>
            <a href="about.html">About</a>
            <a href="#contact">Search</a>
    </div>
    <div class="tab-container">
        <ul class="tabs"></ul>
        <div class="input-container">
            <i class="fas fa-plus" id="add-tab-btn"></i>
            <i class="fas fa-times" id="closetabbtn"></i>
            <button class="back-btn"><i class="fas fa-chevron-left"></i></button>
            <button class="refresh-btn"><i class="fas fa-sync"></i></button>
            <button class="forward-btn"><i class="fas fa-chevron-right"></i></button>
            <form class="inputcontainermain" id="uv-form">
                <input class="search" type="text" id="uv-address" placeholder="Type URL here">
                <input id="uv-search-engine" value="https://www.google.com/search?q=%s" type="hidden"/>
            </form>
            <div class="rightcontrol">
                <a onclick="hide_sidenav();" class="fa-solid fa-bars"></a>
                <a onclick="devtooltoggle()"><i class="fa-solid fa-wrench"></i></a>
            </div>
        </div>
        <div class="tab-panels">
            <div class="tab-panel active" data-src="">
                <iframe src="home.html" frameborder="0"></iframe>
            </div>
        </div>
    </div>
    <div class="desc left-margin">
        <p id="uv-error"></p>
        <pre id="uv-error-code"></pre>
    </div>

    <script src="tab.js"></script>
</body>
</html>


<script>
  var searchEngineValue = localStorage.getItem("searchengine");
    if (!searchEngineValue) {
    searchEngineValue = "https://www.google.com/search?q=%s";
  }
  document.getElementById("uv-search-engine").value = searchEngineValue;
  </script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("uv-form");
    const address = document.getElementById("uv-address");
    const searchEngine = document.getElementById("uv-search-engine");
    const error = document.getElementById("uv-error");
    const errorCode = document.getElementById("uv-error-code");

    const registerServiceWorker = registerSW().catch((err) => {
      error.textContent = "Failed to register service worker.";
      errorCode.textContent = err.toString();
      throw err;
    });

    window.addEventListener('load', async () => {
      await registerServiceWorker();
    });

    function changeTabSrc(src) {
    const activeTabPanel = document.querySelector('.tab-panel.active');
    if (activeTabPanel) {
        const iframe = activeTabPanel.querySelector('iframe');
        iframe.src = src;
    }
}
    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      await registerServiceWorker;
          const url = search(address.value, searchEngine.value);
          const imgsrc = `https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${url}&size=15`;
          const faviconsrc = `<img src="https://phantomcloud.strangled.net/${imgsrc}">`;
          changeTabSrc(__uv$config.prefix + __uv$config.encodeUrl(url));
          setTimeout(function() {
            const activeTabPanel = document.querySelector('.tab-panel.active');
            const iframe = activeTabPanel.querySelector('iframe');
            iframe.addEventListener('load', updatefaviconagain);
          }, 3000);
    });

    window.addEventListener("storage", (event) => {
      if (event.key === "mainurl") {
        registerServiceWorker.then(() => {
          const url = localStorage.getItem("mainurl")
          const imgsrc = `https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${url}&size=15`;
          const faviconsrc = `<img src="https://phantomcloud.strangled.net/${imgsrc}">`;
          changeTabSrc(__uv$config.prefix + __uv$config.encodeUrl(url));
          localStorage.removeItem("mainurl");
          setTimeout(function() {
            const activeTabPanel = document.querySelector('.tab-panel.active');
            const iframe = activeTabPanel.querySelector('iframe');
            iframe.addEventListener('load', updatefaviconagain);
          }, 3000);
        });
      }
    });
  });
</script>

<script>
  function calculateServerPing(serverURL) {
    const beaconData = 'ping-test';
    const startTime = performance.now();
    navigator.sendBeacon(serverURL, beaconData);
    const endTime = performance.now();
    const pingTime = endTime - startTime;
    const pingResultElement = document.getElementById('pingResult');
    alert(`Average ping to ${serverURL}: ${pingTime.toFixed(2)} ms`);
  }
</script>
<script src="nav.js"></script>
<script>hide_sidenav();</script>

